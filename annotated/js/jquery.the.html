<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>jquery.the.js</title>
  <link rel="stylesheet" href="http://github.com/jashkenas/docco/raw/0.3.0/resources/docco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>jquery.the.js</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-&amp;ldquo;The&amp;rdquo;_Event'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&amp;ldquo;The&amp;rdquo;_Event">&#182;</a>
        </div>
        <h1>&ldquo;The&rdquo; Event</h1>

<p>DOM data change announcement event for <a href="http://jquery.com/">jQuery</a></p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">){</span></pre></div>
      </td>
    </tr>
    <tr id='section-2'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-2">&#182;</a>
        </div>
        <p>Usage of <strong><code>.the</code></strong> is identical to jQuery&rsquo;s own <code>.data</code> function
&ndash; it stores/retrieves data key values from data set stored on DOM node.
On top of it has two unique feature add-ons described below.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Value_Change_Event'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Value_Change_Event">&#182;</a>
        </div>
        <h2>Value Change Event</h2>

<p>Each verified value change is announced with <strong><code>"the"</code></strong> event.
Along with the standard event object, the callback receives key and value.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Normalization_of_Values'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Normalization_of_Values">&#182;</a>
        </div>
        <h2>Normalization of Values</h2>

<p>Sometimes you want to make sure a to-be-stored value is &ldquo;legal&rdquo;
by checking the value against a normalization method.
An optional third parameter can be supplied when setting a value.
The parameter will be hash of normalization functions per key (if any).
Normalization function receives input value and must return back the normalized one.
Any value first undergoes normalization and is stored after then (if changed).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-&lt;code&gt;.the(_callback_)&lt;/code&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;code&gt;.the(_callback_)&lt;/code&gt;">&#182;</a>
        </div>
        <h2><code>.the( callback )</code></h2>

<p>Binds a <code>callback</code> function to &ldquo;the&rdquo; event.
Equivalent of <code>.bind("the", callback)</code>.
<code>"the"</code> event is triggered every time a data value changes.
Its <code>callback</code> receives <code>key</code> and <code>value</code> as additional parameters.</p>

<p>Returns <em>jQuery</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">the</span> <span class="o">||</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">the</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">normals</span><span class="p">,</span> <span class="nx">special</span><span class="p">){</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="nx">key</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-&lt;code&gt;.the(_key_)&lt;/code&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;code&gt;.the(_key_)&lt;/code&gt;">&#182;</a>
        </div>
        <h2><code>.the( key )</code></h2>

<p>Retrieves the key from DOM node data store.
Covenience method, equivalent of <code>.data(key)</code>.</p>

<p>Returns <em>value</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">stored</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-&lt;code&gt;.the(_key,_value,_[_normals_]_)&lt;/code&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;code&gt;.the(_key,_value,_[_normals_]_)&lt;/code&gt;">&#182;</a>
        </div>
        <h2><code>.the( key, value, [ normals ] )</code></h2>

<p>Stores the key value into DOM node data store.</p>

<p>Returns <em>value</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">){</span>
      <span class="k">try</span><span class="p">{</span> <span class="kd">var</span> <span class="nx">value</span><span class="o">=</span> <span class="nx">normals</span><span class="p">[</span><span class="nx">key</span><span class="p">](</span><span class="nx">value</span><span class="p">)</span> <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="nx">stored</span><span class="p">){</span>
        <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">).</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">special</span><span class="p">]);</span>
        <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">stored</span><span class="p">;</span>
  <span class="p">})</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-&lt;a_href=&quot;https://github.com/pisi/The&quot;&gt;github.com/pisi/The&lt;/a&gt;'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-&lt;a_href=&quot;https://github.com/pisi/The&quot;&gt;github.com/pisi/The&lt;/a&gt;">&#182;</a>
        </div>
        <hr />

<h2><a href="https://github.com/pisi/The">github.com/pisi/The</a></h2>

<p><strong>&copy; 2011 <a href="http://petr.vostrel.cz/">Petr Vostrel</a></strong></p>

<pre><code>@license "The" Event
Copyright (c) 2011 Petr Vostrel (http://petr.vostrel.cz/)
Dual licensed under the MIT (MIT-LICENSE.txt)
and GPL (GPL-LICENSE.txt) licenses.

Version: 0.1
Updated: 2011-03-17
</code></pre>

      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
